--
-- PostgreSQL database dump
--

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

--
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: -
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: accessToken; Type: TABLE; Schema: public; Owner: -; Tablespace: 
--

CREATE TABLE "accessToken" (
    "clientId" text,
    token text,
    created timestamp with time zone DEFAULT now(),
    id integer NOT NULL,
    "userId" integer
);


--
-- Name: accessToken_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE "accessToken_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: accessToken_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE "accessToken_id_seq" OWNED BY "accessToken".id;


--
-- Name: ads; Type: TABLE; Schema: public; Owner: -; Tablespace: 
--

CREATE TABLE ads (
    id integer NOT NULL,
    "userId" integer,
    name text,
    "shortDescription" text,
    description text,
    active smallint DEFAULT 1 NOT NULL,
    "postedDate" timestamp with time zone DEFAULT now(),
    photo character(50),
    views integer DEFAULT 0,
    price real
);


--
-- Name: ads_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE ads_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: ads_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE ads_id_seq OWNED BY ads.id;


--
-- Name: client; Type: TABLE; Schema: public; Owner: -; Tablespace: 
--

CREATE TABLE client (
    name text,
    "clientSecret" text,
    "clientId" text,
    id integer NOT NULL
);


--
-- Name: clientAccessToken; Type: TABLE; Schema: public; Owner: -; Tablespace: 
--

CREATE TABLE "clientAccessToken" (
    "clientId" text,
    token text,
    created timestamp with time zone DEFAULT now(),
    "userId" integer,
    id bigint NOT NULL
);


--
-- Name: clientAccessToken_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE "clientAccessToken_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: clientAccessToken_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE "clientAccessToken_id_seq" OWNED BY "clientAccessToken".id;


--
-- Name: clientRefreshToken; Type: TABLE; Schema: public; Owner: -; Tablespace: 
--

CREATE TABLE "clientRefreshToken" (
    "clientId" text,
    token text,
    created timestamp with time zone DEFAULT now(),
    "userId" integer,
    id bigint NOT NULL
);


--
-- Name: clientRefreshToken_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE "clientRefreshToken_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: clientRefreshToken_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE "clientRefreshToken_id_seq" OWNED BY "clientRefreshToken".id;


--
-- Name: client_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE client_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: client_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE client_id_seq OWNED BY client.id;


--
-- Name: messages; Type: TABLE; Schema: public; Owner: -; Tablespace: 
--

CREATE TABLE messages (
    id integer DEFAULT nextval('ads_id_seq'::regclass) NOT NULL,
    "senderId" integer,
    "receiverId" integer,
    message text,
    readed integer DEFAULT 0,
    "time" timestamp with time zone DEFAULT now(),
    dialogid character(32)
);


--
-- Name: messages_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE messages_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: messages_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE messages_id_seq OWNED BY messages.id;


--
-- Name: refreshToken; Type: TABLE; Schema: public; Owner: -; Tablespace: 
--

CREATE TABLE "refreshToken" (
    "clientId" text,
    token text,
    created timestamp with time zone,
    id integer NOT NULL,
    "userId" integer
);


--
-- Name: refreshToken_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE "refreshToken_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: refreshToken_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE "refreshToken_id_seq" OWNED BY "refreshToken".id;


--
-- Name: session; Type: TABLE; Schema: public; Owner: -; Tablespace: 
--

CREATE TABLE session (
    sid character varying NOT NULL,
    sess json NOT NULL,
    expire timestamp(6) without time zone NOT NULL
);


--
-- Name: user_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: users; Type: TABLE; Schema: public; Owner: -; Tablespace: 
--

CREATE TABLE users (
    id integer DEFAULT nextval('user_id_seq'::regclass) NOT NULL,
    password text NOT NULL,
    firstname text,
    lastname text,
    email text,
    active smallint DEFAULT 0,
    role text DEFAULT 'customer'::text,
    "regDate" timestamp with time zone DEFAULT now()
);
ALTER TABLE ONLY users ALTER COLUMN role SET STORAGE PLAIN;


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY "accessToken" ALTER COLUMN id SET DEFAULT nextval('"accessToken_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY ads ALTER COLUMN id SET DEFAULT nextval('ads_id_seq'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY client ALTER COLUMN id SET DEFAULT nextval('client_id_seq'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY "clientAccessToken" ALTER COLUMN id SET DEFAULT nextval('"clientAccessToken_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY "clientRefreshToken" ALTER COLUMN id SET DEFAULT nextval('"clientRefreshToken_id_seq"'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY "refreshToken" ALTER COLUMN id SET DEFAULT nextval('"refreshToken_id_seq"'::regclass);


--
-- Name: accessToken_pkey; Type: CONSTRAINT; Schema: public; Owner: -; Tablespace: 
--

ALTER TABLE ONLY "accessToken"
    ADD CONSTRAINT "accessToken_pkey" PRIMARY KEY (id);


--
-- Name: ads_pkey; Type: CONSTRAINT; Schema: public; Owner: -; Tablespace: 
--

ALTER TABLE ONLY ads
    ADD CONSTRAINT ads_pkey PRIMARY KEY (id);


--
-- Name: clientAccessToken_pkey; Type: CONSTRAINT; Schema: public; Owner: -; Tablespace: 
--

ALTER TABLE ONLY "clientAccessToken"
    ADD CONSTRAINT "clientAccessToken_pkey" PRIMARY KEY (id);


--
-- Name: clientRefreshToken_pkey; Type: CONSTRAINT; Schema: public; Owner: -; Tablespace: 
--

ALTER TABLE ONLY "clientRefreshToken"
    ADD CONSTRAINT "clientRefreshToken_pkey" PRIMARY KEY (id);


--
-- Name: client_pkey; Type: CONSTRAINT; Schema: public; Owner: -; Tablespace: 
--

ALTER TABLE ONLY client
    ADD CONSTRAINT client_pkey PRIMARY KEY (id);


--
-- Name: refreshToken_pkey; Type: CONSTRAINT; Schema: public; Owner: -; Tablespace: 
--

ALTER TABLE ONLY "refreshToken"
    ADD CONSTRAINT "refreshToken_pkey" PRIMARY KEY (id);


--
-- Name: session_pkey; Type: CONSTRAINT; Schema: public; Owner: -; Tablespace: 
--

ALTER TABLE ONLY session
    ADD CONSTRAINT session_pkey PRIMARY KEY (sid);


--
-- Name: users_pkey; Type: CONSTRAINT; Schema: public; Owner: -; Tablespace: 
--

ALTER TABLE ONLY users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: public; Type: ACL; Schema: -; Owner: -
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


--
-- Name: users; Type: ACL; Schema: public; Owner: -
--

REVOKE ALL ON TABLE users FROM PUBLIC;
REVOKE ALL ON TABLE users FROM postgres;
GRANT ALL ON TABLE users TO postgres;
GRANT ALL ON TABLE users TO PUBLIC;


--
-- PostgreSQL database dump complete
--

